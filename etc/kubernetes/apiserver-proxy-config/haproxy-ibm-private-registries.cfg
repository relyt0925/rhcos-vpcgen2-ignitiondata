global
  maxconn 7000
  log stdout local0
  log stdout local1 notice

frontend ussouthregionalregistryfrontend
    bind 169.254.2.1:443
    mode tcp
    log global
    option tcplog
    default_backend ussouthregionalregistrybackend

backend ussouthregionalregistrybackend
    mode tcp
    balance roundrobin
    log global
    option tcp-check
    option log-health-checks
    default-server inter 60s fall 3 rise 3
    server z1-1.private.us.icr.io z1-1.private.us.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z2-1.private.us.icr.io z2-1.private.us.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z3-1.private.us.icr.io z3-1.private.us.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server alt.us.icr.io alt.us.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions

frontend ussouthregionalregistrysigningfrontend
    bind 169.254.2.1:4443
    mode tcp
    log global
    option tcplog
    default_backend ussouthregionalregistrysigningbackend

backend ussouthregionalregistrysigningbackend
    mode tcp
    balance roundrobin
    log global
    option tcp-check
    option log-health-checks
    default-server inter 60s fall 3 rise 3
    server z1-1.private.us.icr.io z1-1.private.us.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z2-1.private.us.icr.io z2-1.private.us.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z3-1.private.us.icr.io z3-1.private.us.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server alt.us.icr.io alt.us.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions

frontend apnorthregionalregistryfrontend
    bind 169.254.2.2:443
    mode tcp
    log global
    option tcplog
    default_backend apnorthregionalregistrybackend

backend apnorthregionalregistrybackend
    mode tcp
    balance roundrobin
    log global
    option tcp-check
    option log-health-checks
    default-server inter 60s fall 3 rise 3
    server z1-1.private.jp.icr.io z1-1.private.jp.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z2-1.private.jp.icr.io z2-1.private.jp.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z3-1.private.jp.icr.io z3-1.private.jp.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server alt.jp.icr.io alt.jp.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions

frontend apnorthregionalregistrysigningfrontend
    bind 169.254.2.2:4443
    mode tcp
    log global
    option tcplog
    default_backend apnorthregionalregistrysigningbackend

backend apnorthregionalregistrysigningbackend
    mode tcp
    balance roundrobin
    log global
    option tcp-check
    option log-health-checks
    default-server inter 60s fall 3 rise 3
    server z1-1.private.jp.icr.io z1-1.private.jp.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z2-1.private.jp.icr.io z2-1.private.jp.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z3-1.private.jp.icr.io z3-1.private.jp.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server alt.jp.icr.io alt.jp.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions

frontend eucentralregionalregistryfrontend
    bind 169.254.2.3:443
    mode tcp
    log global
    option tcplog
    default_backend eucentralregionalregistrybackend

backend eucentralregionalregistrybackend
    mode tcp
    balance roundrobin
    log global
    option tcp-check
    option log-health-checks
    default-server inter 60s fall 3 rise 3
    server z1-1.private.de.icr.io z1-1.private.de.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z2-1.private.de.icr.io z2-1.private.de.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z3-1.private.de.icr.io z3-1.private.de.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server alt.de.icr.io alt.de.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions

frontend eucentralregionalregistrysigningfrontend
    bind 169.254.2.3:4443
    mode tcp
    log global
    option tcplog
    default_backend eucentralregionalregistrysigningbackend

backend eucentralregionalregistrysigningbackend
    mode tcp
    balance roundrobin
    log global
    option tcp-check
    option log-health-checks
    default-server inter 60s fall 3 rise 3
    server z1-1.private.de.icr.io z1-1.private.de.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z2-1.private.de.icr.io z2-1.private.de.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z3-1.private.de.icr.io z3-1.private.de.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server alt.de.icr.io alt.de.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions

frontend uksouthregionalregistryfrontend
    bind 169.254.2.4:443
    mode tcp
    log global
    option tcplog
    default_backend uksouthregionalregistrybackend

backend uksouthregionalregistrybackend
    mode tcp
    balance roundrobin
    log global
    option tcp-check
    option log-health-checks
    default-server inter 60s fall 3 rise 3
    server z1-1.private.uk.icr.io z1-1.private.uk.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z2-1.private.uk.icr.io z2-1.private.uk.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z3-1.private.uk.icr.io z3-1.private.uk.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server alt.uk.icr.io alt.uk.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions

frontend uksouthregionalregistrysigningfrontend
    bind 169.254.2.4:4443
    mode tcp
    log global
    option tcplog
    default_backend uksouthregionalregistrysigningbackend

backend uksouthregionalregistrysigningbackend
    mode tcp
    balance roundrobin
    log global
    option tcp-check
    option log-health-checks
    default-server inter 60s fall 3 rise 3
    server z1-1.private.uk.icr.io z1-1.private.uk.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z2-1.private.uk.icr.io z2-1.private.uk.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z3-1.private.uk.icr.io z3-1.private.uk.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server alt.uk.icr.io alt.uk.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions

frontend apsouthregionalregistryfrontend
    bind 169.254.2.5:443
    mode tcp
    log global
    option tcplog
    default_backend apsouthregionalregistrybackend

backend apsouthregionalregistrybackend
    mode tcp
    balance roundrobin
    log global
    option tcp-check
    option log-health-checks
    default-server inter 60s fall 3 rise 3
    server z1-1.private.au.icr.io z1-1.private.au.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z2-1.private.au.icr.io z2-1.private.au.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z3-1.private.au.icr.io z3-1.private.au.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server alt.au.icr.io alt.au.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions

frontend apsouthregionalregistrysigningfrontend
    bind 169.254.2.5:4443
    mode tcp
    log global
    option tcplog
    default_backend apsouthregionalregistrysigningbackend

backend apsouthregionalregistrysigningbackend
    mode tcp
    balance roundrobin
    log global
    option tcp-check
    option log-health-checks
    default-server inter 60s fall 3 rise 3
    server z1-1.private.au.icr.io z1-1.private.au.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z2-1.private.au.icr.io z2-1.private.au.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z3-1.private.au.icr.io z3-1.private.au.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server alt.au.icr.io alt.au.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions

frontend internationalregistryfrontend
    bind 169.254.2.6:443
    mode tcp
    log global
    option tcplog
    default_backend internationalregistrybackend

backend internationalregistrybackend
    mode tcp
    balance roundrobin
    log global
    option tcp-check
    option log-health-checks
    default-server inter 60s fall 3 rise 3
    server z1-1.private.icr.io z1-1.private.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z2-1.private.icr.io z2-1.private.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z3-1.private.icr.io z3-1.private.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server alt.icr.io alt.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions

frontend internationalregistrysigningfrontend
    bind 169.254.2.6:4443
    mode tcp
    log global
    option tcplog
    default_backend internationalregistrysigningbackend

backend internationalregistrysigningbackend
    mode tcp
    balance roundrobin
    log global
    option tcp-check
    option log-health-checks
    default-server inter 60s fall 3 rise 3
    server z1-1.private.icr.io z1-1.private.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z2-1.private.icr.io z2-1.private.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z3-1.private.icr.io z3-1.private.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server alt.icr.io alt.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions

frontend eufr2regionalregistryfrontend
    bind 169.254.2.7:443
    mode tcp
    log global
    option tcplog
    default_backend internationalregistrybackend

backend eufr2regionalregistrybackend
    mode tcp
    balance roundrobin
    log global
    option tcp-check
    option log-health-checks
    default-server inter 60s fall 3 rise 3
    server z1-1.private.icr.io z1-1.private.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z2-1.private.icr.io z2-1.private.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z3-1.private.icr.io z3-1.private.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server alt.icr.io alt.icr.io:443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions

frontend eufr2regionalregistrysigningfrontend
    bind 169.254.2.7:4443
    mode tcp
    log global
    option tcplog
    default_backend internationalregistrysigningbackend

backend eufr2regionalregistrysigningbackend
    mode tcp
    balance roundrobin
    log global
    option tcp-check
    option log-health-checks
    default-server inter 60s fall 3 rise 3
    server z1-1.private.icr.io z1-1.private.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z2-1.private.icr.io z2-1.private.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server z3-1.private.icr.io z3-1.private.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
    server alt.icr.io alt.icr.io:4443 check on-marked-down shutdown-sessions on-marked-up shutdown-backup-sessions
